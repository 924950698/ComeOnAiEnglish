<!--å¥–åŠ±ä¸­å¿ƒé¡µé¢-->
<view class="container">
  <!-- é¡¶éƒ¨ä¿¡æ¯ -->
  <view class="header">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="title">å¥–åŠ±ä¸­å¿ƒ</view>
    <view class="placeholder"></view>
  </view>

  <!-- ç”¨æˆ·ç§¯åˆ†ä¿¡æ¯ -->
  <view class="user-score">
    <view class="score-card">
      <view class="score-icon">ğŸ’</view>
      <view class="score-info">
        <view class="score-number">{{totalScore}}</view>
        <view class="score-label">æ€»ç§¯åˆ†</view>
      </view>
      <view class="level-info">
        <view class="level-text">Lv.{{userLevel}}</view>
        <view class="level-progress">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{levelProgress}}%"></view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆå°±ç³»ç»Ÿ -->
  <view class="achievements">
    <view class="section-title">ğŸ† æˆå°±å¾½ç« </view>
    <view class="achievement-grid">
      <view class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}" 
            wx:for="{{achievements}}" 
            wx:key="id"
            bindtap="viewAchievement" 
            data-id="{{item.id}}">
        <view class="achievement-icon">
          <image src="{{item.icon}}" class="icon-img" wx:if="{{item.unlocked}}"></image>
          <text class="lock-icon" wx:else>ğŸ”’</text>
        </view>
        <view class="achievement-name">{{item.name}}</view>
        <view class="achievement-desc">{{item.description}}</view>
        <view class="achievement-reward" wx:if="{{item.unlocked}}">+{{item.reward}}ç§¯åˆ†</view>
      </view>
    </view>
  </view>

  <!-- é¥°å“å•†åº— -->
  <view class="shop">
    <view class="section-title">ğŸ¨ é¥°å“å•†åº—</view>
    <view class="shop-tabs">
      <view class="tab-item {{currentTab === 'avatar' ? 'active' : ''}}" 
            bindtap="switchTab" 
            data-tab="avatar">å¤´åƒæ¡†</view>
      <view class="tab-item {{currentTab === 'background' ? 'active' : ''}}" 
            bindtap="switchTab" 
            data-tab="background">èƒŒæ™¯</view>
      <view class="tab-item {{currentTab === 'effects' ? 'active' : ''}}" 
            bindtap="switchTab" 
            data-tab="effects">ç‰¹æ•ˆ</view>
    </view>

    <!-- å¤´åƒæ¡† -->
    <view class="shop-content" wx:if="{{currentTab === 'avatar'}}">
      <view class="item-list">
        <view class="shop-item {{item.owned ? 'owned' : ''}}" 
              wx:for="{{avatarFrames}}" 
              wx:key="id"
              bindtap="buyItem" 
              data-item="{{item}}">
          <view class="item-preview">
            <image src="{{item.preview}}" class="preview-img"></image>
            <view class="owned-badge" wx:if="{{item.owned}}">å·²æ‹¥æœ‰</view>
          </view>
          <view class="item-info">
            <view class="item-name">{{item.name}}</view>
            <view class="item-desc">{{item.description}}</view>
            <view class="item-price">
              <text class="price-icon">ğŸ’</text>
              <text class="price-number">{{item.price}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- èƒŒæ™¯ -->
    <view class="shop-content" wx:if="{{currentTab === 'background'}}">
      <view class="item-list">
        <view class="shop-item {{item.owned ? 'owned' : ''}}" 
              wx:for="{{backgrounds}}" 
              wx:key="id"
              bindtap="buyItem" 
              data-item="{{item}}">
          <view class="item-preview">
            <image src="{{item.preview}}" class="preview-img"></image>
            <view class="owned-badge" wx:if="{{item.owned}}">å·²æ‹¥æœ‰</view>
          </view>
          <view class="item-info">
            <view class="item-name">{{item.name}}</view>
            <view class="item-desc">{{item.description}}</view>
            <view class="item-price">
              <text class="price-icon">ğŸ’</text>
              <text class="price-number">{{item.price}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç‰¹æ•ˆ -->
    <view class="shop-content" wx:if="{{currentTab === 'effects'}}">
      <view class="item-list">
        <view class="shop-item {{item.owned ? 'owned' : ''}}" 
              wx:for="{{effects}}" 
              wx:key="id"
              bindtap="buyItem" 
              data-item="{{item}}">
          <view class="item-preview">
            <image src="{{item.preview}}" class="preview-img"></image>
            <view class="owned-badge" wx:if="{{item.owned}}">å·²æ‹¥æœ‰</view>
          </view>
          <view class="item-info">
            <view class="item-name">{{item.name}}</view>
            <view class="item-desc">{{item.description}}</view>
            <view class="item-price">
              <text class="price-icon">ğŸ’</text>
              <text class="price-number">{{item.price}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç§¯åˆ†è·å–æ–¹å¼ -->
  <view class="score-ways">
    <view class="section-title">ğŸ’¡ è·å–ç§¯åˆ†</view>
    <view class="ways-list">
      <view class="way-item" wx:for="{{scoreWays}}" wx:key="id">
        <view class="way-icon">{{item.icon}}</view>
        <view class="way-content">
          <view class="way-name">{{item.name}}</view>
          <view class="way-desc">{{item.description}}</view>
        </view>
        <view class="way-reward">+{{item.reward}}ç§¯åˆ†</view>
      </view>
    </view>
  </view>
</view>
