<!--ç¤¾äº¤åŠŸèƒ½é¡µé¢-->
<view class="container">
  <!-- é¡¶éƒ¨ä¿¡æ¯ -->
  <view class="header">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="title">å¥½å‹æŒ‘æˆ˜</view>
    <view class="placeholder"></view>
  </view>

  <!-- é‚€è¯·å¥½å‹ -->
  <view class="invite-section">
    <view class="invite-card">
      <view class="invite-icon">ğŸ‘¥</view>
      <view class="invite-content">
        <view class="invite-title">é‚€è¯·å¥½å‹ä¸€èµ·å­¦ä¹ </view>
        <view class="invite-desc">é‚€è¯·å¥½å‹å¯è·å¾—ç§¯åˆ†å¥–åŠ±ï¼Œä¸€èµ·è¿›æ­¥æ›´æœ‰è¶£</view>
        <view class="invite-stats">
          <text class="invite-count">å·²é‚€è¯·: {{inviteCount}}äºº</text>
          <text class="invite-reward">è·å¾—: {{inviteReward}}ç§¯åˆ†</text>
        </view>
      </view>
      <view class="invite-btn" bindtap="inviteFriend">
        <text class="btn-text">é‚€è¯·</text>
      </view>
    </view>
  </view>

  <!-- å¥½å‹åˆ—è¡¨ -->
  <view class="friends-section">
    <view class="section-title">ğŸ‘¥ æˆ‘çš„å¥½å‹</view>
    <view class="friends-list" wx:if="{{friends.length > 0}}">
      <view class="friend-item" wx:for="{{friends}}" wx:key="id">
        <view class="friend-avatar">
          <image src="{{item.avatar}}" class="avatar-img"></image>
          <view class="online-status {{item.online ? 'online' : 'offline'}}"></view>
        </view>
        <view class="friend-info">
          <view class="friend-name">{{item.name}}</view>
          <view class="friend-level">Lv.{{item.level}}</view>
          <view class="friend-score">ç§¯åˆ†: {{item.score}}</view>
        </view>
        <view class="friend-actions">
          <view class="action-btn challenge-btn" bindtap="challengeFriend" data-id="{{item.id}}">
            <text class="btn-text">æŒ‘æˆ˜</text>
          </view>
        </view>
      </view>
    </view>
    <view class="empty-friends" wx:else>
      <view class="empty-icon">ğŸ‘¥</view>
      <view class="empty-text">è¿˜æ²¡æœ‰å¥½å‹</view>
      <view class="empty-desc">å¿«å»é‚€è¯·å¥½å‹ä¸€èµ·å­¦ä¹ å§</view>
    </view>
  </view>

  <!-- æ’è¡Œæ¦œ -->
  <view class="ranking-section">
    <view class="section-title">ğŸ† æ’è¡Œæ¦œ</view>
    <view class="ranking-tabs">
      <view class="tab-item {{currentRankTab === 'weekly' ? 'active' : ''}}" 
            bindtap="switchRankTab" 
            data-tab="weekly">æœ¬å‘¨</view>
      <view class="tab-item {{currentRankTab === 'monthly' ? 'active' : ''}}" 
            bindtap="switchRankTab" 
            data-tab="monthly">æœ¬æœˆ</view>
      <view class="tab-item {{currentRankTab === 'all' ? 'active' : ''}}" 
            bindtap="switchRankTab" 
            data-tab="all">æ€»æ¦œ</view>
    </view>
    
    <view class="ranking-list">
      <view class="rank-item {{item.isMe ? 'my-rank' : ''}}" 
            wx:for="{{rankingList}}" 
            wx:key="id">
        <view class="rank-number">
          <text class="rank-text" wx:if="{{item.rank <= 3}}">{{item.rank}}</text>
          <text class="rank-icon" wx:else>{{item.rank}}</text>
        </view>
        <view class="rank-avatar">
          <image src="{{item.avatar}}" class="avatar-img"></image>
          <view class="rank-badge" wx:if="{{item.rank <= 3}}">
            <text class="badge-icon">ğŸ†</text>
          </view>
        </view>
        <view class="rank-info">
          <view class="rank-name">{{item.name}}</view>
          <view class="rank-level">Lv.{{item.level}}</view>
        </view>
        <view class="rank-score">{{item.score}}</view>
      </view>
    </view>
  </view>

  <!-- æŒ‘æˆ˜è®°å½• -->
  <view class="challenge-section">
    <view class="section-title">âš”ï¸ æŒ‘æˆ˜è®°å½•</view>
    <view class="challenge-list" wx:if="{{challenges.length > 0}}">
      <view class="challenge-item" wx:for="{{challenges}}" wx:key="id">
        <view class="challenge-info">
          <view class="challenge-type">{{item.type}}</view>
          <view class="challenge-opponent">vs {{item.opponent}}</view>
          <view class="challenge-time">{{item.time}}</view>
        </view>
        <view class="challenge-result {{item.result}}">
          <text class="result-text">{{item.resultText}}</text>
        </view>
        <view class="challenge-score">
          <text class="my-score">{{item.myScore}}</text>
          <text class="vs-text">vs</text>
          <text class="opponent-score">{{item.opponentScore}}</text>
        </view>
      </view>
    </view>
    <view class="empty-challenges" wx:else>
      <view class="empty-icon">âš”ï¸</view>
      <view class="empty-text">è¿˜æ²¡æœ‰æŒ‘æˆ˜è®°å½•</view>
      <view class="empty-desc">å¿«å»æŒ‘æˆ˜å¥½å‹å§</view>
    </view>
  </view>

  <!-- æ¯æ—¥ä»»åŠ¡ -->
  <view class="tasks-section">
    <view class="section-title">ğŸ“‹ æ¯æ—¥ä»»åŠ¡</view>
    <view class="tasks-list">
      <view class="task-item {{item.completed ? 'completed' : ''}}" 
            wx:for="{{dailyTasks}}" 
            wx:key="id">
        <view class="task-icon">{{item.icon}}</view>
        <view class="task-content">
          <view class="task-name">{{item.name}}</view>
          <view class="task-desc">{{item.description}}</view>
          <view class="task-progress" wx:if="{{!item.completed}}">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{item.progress}}%"></view>
            </view>
            <text class="progress-text">{{item.current}}/{{item.target}}</text>
          </view>
        </view>
        <view class="task-reward">
          <text class="reward-icon">ğŸ’</text>
          <text class="reward-number">{{item.reward}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
